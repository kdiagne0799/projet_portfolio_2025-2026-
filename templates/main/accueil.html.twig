{% extends 'base.html.twig' %}

{% block title %}KHADIM DIAGNE ‚Äì Portfolio{% endblock %}

{% block body %}

<section class="accueil">

  <!-- Photo + Documents -->
  <div class="media-section">

    <img src="{{ asset('image/profil.jpg') }}" alt="KHADIM DIAGNE Profile Photo" class="profil-img">


<!-- Bouton pour voir mon CV avec une couleur verte fluo -->
<div class="button-section">
  <button onclick="showForm()" class="btn btn-info btn-see-my-cv">Access my CV</button>
</div>

<!-- Formulaire d'inscription -->
<div class="form-section" id="form-section" style="display:none;">
  <h2>Sign up to view and download my CV</h2>
  <form id="cv-form" onsubmit="return validateForm()" autocomplete="off">
    <label for="firstName">First Name:</label>
    <input type="text" id="firstName" name="firstName" required onkeydown="moveToNextField(event, 'lastName')" /><br>

    <label for="lastName">Last Name:</label>
    <input type="text" id="lastName" name="lastName" required onkeydown="moveToNextField(event, 'email')" /><br>

    <label for="email">Email:</label>
    <input type="email" id="email" name="email" required onkeydown="moveToNextField(event, 'address')" /><br>

    <label for="address">Address:</label>
    <input type="text" id="address" name="address" required onkeydown="moveToNextField(event, 'profession')" /><br>

    <label for="profession">Profession:</label>
    <input type="text" id="profession" name="profession" required /><br>

    <button type="submit">Submit</button>
  </form>
</div>

<!-- Section pour afficher et t√©l√©charger/imprimer mon CV -->
<div class="documents-section" id="cv-docs" style="display:none;">
 

  <!-- Ajouter le bouton "" -->
  <button onclick="viewMyCV()" class="btn btn-secondary" style="margin-bottom:10px;">View my CV</button>

  <div class="download-box">
    <h4>Click the links below to download or print my CV</h4>
    <a href="{{ asset('cv/cv_Khadim_Diagne.html') }}" class="btn btn-success" download>
      <i class="bi bi-download"></i> Download CV
    </a>

    <!-- Mise en forme des boutons -->
    <button onclick="printCV()" class="btn btn-primary" style="margin-top:10px;">
      üñ®Ô∏è Print CV
    </button>
  </div>
</div>

<script>
// Fonction pour afficher le formulaire apr√®s le clic sur "Voir mon CV"
function showForm() {
    document.getElementById('form-section').style.display = 'block';  // Afficher le formulaire
    document.querySelector('.button-section').style.display = 'none';  // Cacher le bouton "Voir mon CV"
}

// Fonction pour d√©placer le focus vers le champ suivant avec "Entr√©e"
function moveToNextField(event, nextFieldId) {
    if (event.key === 'Enter') {
        event.preventDefault(); // Emp√™cher le formulaire de se soumettre
        document.getElementById(nextFieldId).focus(); // D√©placer le focus vers le champ suivant
    }
}

// Fonction de validation du formulaire
function validateForm() {
    const firstName = document.getElementById('firstName');
    const lastName = document.getElementById('lastName');
    const email = document.getElementById('email');
    const address = document.getElementById('address');
    const profession = document.getElementById('profession');

    let valid = true;

    // Validation des champs
    if (firstName.value.length < 2) {
        firstName.classList.add('invalid');
        valid = false;
    } else {
        firstName.classList.remove('invalid');
    }

    if (lastName.value.length < 2) {
        lastName.classList.add('invalid');
        valid = false;
    } else {
        lastName.classList.remove('invalid');
    }

    // Validation de l'email : au moins 3 caract√®res, un @, et un domaine valide (.com, .fr, etc.)
    const emailPattern = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
    if (email.value.length < 3 || !emailPattern.test(email.value)) {
        email.classList.add('invalid');
        valid = false;
    } else {
        email.classList.remove('invalid');
    }

    // Validation de l'adresse
    if (address.value.length < 3) {
        address.classList.add('invalid');
        valid = false;
    } else {
        address.classList.remove('invalid');
    }

    // Validation de la profession : minimum 2 caract√®res
    if (profession.value.length < 2) {
        profession.classList.add('invalid');
        valid = false;
    } else {
        profession.classList.remove('invalid');
    }

    if (!valid) {
        alert("Please fill in all the fields correctly.");
    } else {
        alert("Thank you! Now you can view and download my CV.");
        document.getElementById('cv-docs').style.display = 'block'; // Afficher le CV
    }

    return false; // Emp√™cher l'envoi du formulaire
}

// Fonction pour voir mon CV apr√®s la soumission du formulaire
function viewMyCV() {
    // Ouvrir une nouvelle page pour voir le CV
    window.open('{{ asset("cv/cv_Khadim_Diagne.html") }}', '_blank');
}

// Fonction pour imprimer mon CV
function printCV() {
    const cvWindow = window.open('{{ asset("cv/cv_Khadim_Diagne.html") }}', '_blank');
    cvWindow.onload = function () {
        cvWindow.print();
    };
}
</script>

<!-- Inclure la biblioth√®que jsPDF pour g√©n√©rer le PDF (si n√©cessaire) -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
/* Style pour les champs invalides */
.invalid {
    border: 2px solid red;
    background-color: #ffe6e6;
}

/* Style pour le bouton "See My CV" en vert fluo */
.btn-see-my-cv {
    background-color: #18ce48ff; /* Vert fluo */
    color: white;
    padding: 10px 20px;
    font-size: 16px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    transition: background-color 0.3s ease;
    margin-top: 10px;
}

/* Effet au survol du bouton "See My CV" */
.btn-see-my-cv:hover {
    background-color: #118d2cff; /* Vert plus fonc√© */
}
</style>
  </div>

  <!-- Content Block -->
  <div class="contenu">

    <h1>KHADIM DIAGNE‚ÄìGROUP-B2</h1>
    <p class="accroche">Mastering technologies to build a responsible digital future</p>

    <div id="profil-card" class="theme theme-lumineux">
      <h1>Building strong connections in an interconnected world.</h1>
    </div>

    <div class="presentation"></div>

    <p><strong>Age:</strong> 19 years old</p>
    <p><strong>City:</strong> Roanne</p>
    <p><strong>Degree:</strong> BUT Networks & Telecommunications ‚Äì Jean-Monnet University, Saint-√âtienne</p>
    <p><strong>Profile:</strong> A passionate student focusing on intelligent systems, network architecture, and secure web development.</p>

    <div style="background-color: #d4edda; padding: 20px;">
      <p><strong>Want to know more?</strong></p>
      <p>Discover my passions, personal projects, and what drives me daily.</p>
      <a href="/loisirs">See my hobbies</a>
    </div>

    <!-- Skills -->
    <div class="competences">
      <h2>My Areas of Expertise</h2>
      <ul>
        <li>üñ•Ô∏è Advanced Linux System Administration</li>
        <li>üêç Python Programming for Automation & Security</li>
        <li>üõ°Ô∏è Secure Web Development with Symfony</li>
        <li>üåê Design & Optimization of Intelligent Network Architectures</li>
      </ul>
    </div>

  </div>

</section>

<!-- Background Section -->
<section class="accueil-background">
  <div class="contenu fade-in">
    <h1>Welcome to the world of my achievements</h1>
    <p>Explore my portfolio, discover my projects, and access documents that reflect my skills.</p>
    <a href="{{ path('mon_e_portfolio') }}" class="doc-button bw">üìÅ View my e-Portfolio</a>
  </div>
</section>


<!-- Theme Button -->
<div style="text-align: center; margin-top: 20px; margin-bottom: 40px;">
  <button id="themeButton" class="change-theme">üé® Change Theme</button>
</div>



<!-- Footer -->
<footer class="footer-strict">
  <span>&copy; KHADIM DIAGNE ‚Äì This website and all its content are protected. Unauthorized reproduction, copying, or distribution is strictly prohibited.</span>
</footer>

{% endblock %}
